<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RBAC Login - Cybersecurity Demo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="otp-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google reCAPTCHA API -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
    <!-- Toast notification container -->
    <div id="toast-container"></div>

    <!-- Homepage -->
    <div class="homepage-container" id="homePage">
        <!-- Navigation Bar -->
        <nav class="homepage-navbar">
            <div class="nav-brand">
                <i class="fas fa-shield-alt"></i>
                <span>AccessRakshak</span>
            </div>
            <div class="nav-actions">
                <button class="dark-mode-toggle" id="darkModeToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="btn btn-outline" onclick="showLoginPage()">Login</button>
                <button class="btn btn-primary" onclick="showRegisterPage()">Get Started</button>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-content">
                <div class="hero-text">
                    <h1 class="hero-title">
                        Secure Employee Management with 
                        <span class="gradient-text">Role-Based Access Control</span>
                    </h1>
                    <p class="hero-subtitle">
                        Streamline your organization with intelligent access management. 
                        Control who sees what, when they see it, and how they interact with your system.
                    </p>
                    <div class="hero-buttons">
                        <button class="btn btn-primary btn-large" onclick="showRegisterPage()">
                            <i class="fas fa-rocket"></i>
                            Start Free Trial
                        </button>
                        <button class="btn btn-outline btn-large" onclick="showLoginPage()">
                            <i class="fas fa-sign-in-alt"></i>
                            Sign In
                        </button>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="security-graphic">
                        <i class="fas fa-shield-alt"></i>
                        <div class="security-rings">
                            <div class="ring ring-1"></div>
                            <div class="ring ring-2"></div>
                            <div class="ring ring-3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="features-section">
            <div class="container">
                <div class="section-header">
                    <h2>Key Cybersecurity Features</h2>
                    <p>Robust technical safeguards implemented in AccessRakshak</p>
                </div>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <h3>Role-Based Access Control (RBAC)</h3>
                        <p>Strict enforcement of least-privilege access using well-defined roles and permissions for all users and actions.</p>
                        <div class="feature-badge">Access Control</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3>Session Security & Management</h3>
                        <p>Secure session handling with timeout, session fixation prevention, and protection against session hijacking.</p>
                        <div class="feature-badge">Session Security</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <h3>SQL Injection Prevention</h3>
                        <p>All database queries use parameterized statements to eliminate SQL injection vulnerabilities.</p>
                        <div class="feature-badge">Data Security</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-lock"></i>
                        </div>
                        <h3>IDOR Protection</h3>
                        <p>Prevents Insecure Direct Object Reference (IDOR) attacks by validating user access to every resource request.</p>
                        <div class="feature-badge">Object Security</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <h3>Audit Trail & Logging</h3>
                        <p>Comprehensive audit logs for all critical actions, supporting monitoring, forensics, and compliance.</p>
                        <div class="feature-badge">Audit</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-secret"></i>
                        </div>
                        <h3>Secure Authentication</h3>
                        <p>Strong password policies, password strength meter, and demo support for multi-factor authentication (OTP).</p>
                        <div class="feature-badge">Authentication</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Role Demo Section -->
        <section class="role-demo-section">
            <div class="container">
                <div class="section-header">
                    <h2>Experience Different Role Perspectives</h2>
                    <p>See how the system adapts to different user roles</p>
                </div>
                
                <div class="role-cards">
                    <div class="role-card admin-role">
                        <div class="role-header">
                            <i class="fas fa-crown"></i>
                            <h3>Administrator</h3>
                        </div>
                        <div class="role-features">
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>Full system access</span>
                            </div>
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>User management</span>
                            </div>
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>System configuration</span>
                            </div>
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>Advanced reporting</span>
                            </div>
                        </div>
                        <button class="btn btn-role-demo" onclick="demoLogin('admin')">
                            Try Admin Demo
                        </button>
                    </div>
                    
                    <div class="role-card manager-role">
                        <div class="role-header">
                            <i class="fas fa-users-cog"></i>
                            <h3>Manager</h3>
                        </div>
                        <div class="role-features">
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>Team management</span>
                            </div>
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>Approve requests</span>
                            </div>
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>Team reports</span>
                            </div>
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>Performance tracking</span>
                            </div>
                        </div>
                        <button class="btn btn-role-demo" onclick="demoLogin('manager')">
                            Try Manager Demo
                        </button>
                    </div>
                    
                    <div class="role-card employee-role">
                        <div class="role-header">
                            <i class="fas fa-user"></i>
                            <h3>Employee (Priya Sharma)</h3>
                        </div>
                        <div class="role-features">
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>Profile management</span>
                            </div>
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>Submit requests</span>
                            </div>
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>View schedules</span>
                            </div>
                            <div class="role-feature">
                                <i class="fas fa-check"></i>
                                <span>Personal dashboard</span>
                            </div>
                        </div>
                        <button class="btn btn-role-demo" onclick="demoLogin('employee')">
                            Try Priya Sharma Demo
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="homepage-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-brand">
                        <i class="fas fa-shield-alt"></i>
                        <span>AccessRakshak</span>
                    </div>
                    <div class="footer-text">
                        <p>© 2025 AccessRakshak - Cybersecurity Demo Project</p>
                        <p>Built with modern web technologies for educational purposes</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Registration Page -->
    <div class="register-container" id="registerPage" style="display: none;">
        <div class="register-card">
            <div class="register-header">
                <div class="logo">
                    <i class="fas fa-shield-alt"></i>
                    <h1>Create Account</h1>
                </div>
                <!-- Removed SecureFlow RBAC System subtitle -->
                <p class="subtitle">Join AccessRakshak System</p>
                <button class="back-to-home" onclick="showHomePage()">
                    <i class="fas fa-arrow-left"></i>
                    Back to Home
                </button>
            </div>

            <form class="register-form" id="registerForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" name="firstName" placeholder="Enter first name" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" name="lastName" placeholder="Enter last name" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="registerEmail">Email Address</label>
                    <div class="input-wrapper">
                        <input type="email" id="registerEmail" name="email" placeholder="Enter your email" required>
                        <button type="button" id="sendOtpBtn" class="btn btn-outline">Send Verification Code</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" name="password" placeholder="Create a password" required>
                    <div class="password-strength-visual">
                        <div class="strength-meter-bar">
                            <div class="strength-meter-fill" id="strengthMeterFill"></div>
                        </div>
                        <div class="strength-text" id="strengthText">Password strength: Weak</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" required>
                </div>
                
                
                <div class="form-group">
                    <label for="department">Department</label>
                    <select id="department" name="department" required>
                        <option value="">Select Department</option>
                        <option value="IT">Information Technology</option>
                        <option value="HR">Human Resources</option>
                        <option value="Finance">Finance</option>
                        <option value="Marketing">Marketing</option>
                        <option value="Operations">Operations</option>
                    </select>
                </div>

                <!-- OTP Verification Section -->
                <div class="form-group otp-group" id="otpGroup" style="display:none;">
                    <label for="registerOtp">Verification Code</label>
                    <div class="input-wrapper">
                        <input type="text" id="registerOtp" name="code" placeholder="Enter verification code">
                    </div>
                    <small id="otpMessage" style="color:green; display:none;">Code sent. Expires in 5 minutes.</small>
                </div>
                 <!-- CAPTCHA Section -->
                 <div class="captcha-section">
                    <div class="captcha-tabs">
                        <button type="button" class="captcha-tab active" data-captcha="text">Text CAPTCHA</button>
                        <button type="button" class="captcha-tab" data-captcha="image">Image CAPTCHA</button>
                    </div>
                    
                    <!-- Text CAPTCHA -->
                    <div class="captcha-content" id="textCaptcha">
                        <div class="text-captcha-display" id="textCaptchaDisplay"></div>
                        <div class="captcha-controls">
                            <button type="button" class="captcha-refresh" onclick="generateTextCaptcha()">
                                <i class="fas fa-refresh"></i>
                            </button>
                        </div>
                        <div class="form-group">
                            <label for="textCaptchaInput">Enter the text above</label>
                            <input type="text" id="textCaptchaInput" placeholder="Enter CAPTCHA text" required>
                        </div>
                    </div>
                    
                    <!-- Image CAPTCHA -->
                    <div class="captcha-content" id="imageCaptcha" style="display: none;">
                        <div class="image-captcha-instruction">
                            <p>Select all images that contain: <span id="imageTargetText">cars</span></p>
                        </div>
                        <div class="image-captcha-grid" id="imageCaptchaGrid">
                            <!-- Images will be generated by JavaScript -->
                        </div>
                        <div class="captcha-controls">
                            <button type="button" class="captcha-refresh" onclick="generateImageCaptcha()">
                                <i class="fas fa-refresh"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Google reCAPTCHA widget -->
                <!-- <div class="form-group" style="margin-top: 16px;">
                    <div class="g-recaptcha" data-sitekey="6Lfaw4MrAAAAAMpFV4PR-wGHZscV6xJ6ftktiqsi"></div>
                </div> -->

                <button type="submit" class="register-btn">
                    <i class="fas fa-user-plus"></i>
                    Create Account
                </button>
            </form>

            <div class="login-link">
                <p>Already have an account? <a href="#" onclick="showLoginPage()">Sign In</a></p>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div class="login-container" id="loginPage" style="display: none;">
        <div class="login-card">
            <div class="login-header">
                <div class="logo">
                    <i class="fas fa-shield-alt"></i>
                    <h1>Welcome Back</h1>
                </div>
                <!-- Removed SecureFlow RBAC System subtitle -->
                <p class="subtitle">Sign in to AccessRakshak System</p>
                <button class="back-to-home" onclick="showHomePage()">
                    <i class="fas fa-arrow-left"></i>
                    Back to Home
                </button>
            </div>

            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <div class="input-wrapper">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="email" name="email" placeholder="Enter your email" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="input-wrapper">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="password" name="password" placeholder="Enter your password" required>
                        <i class="fas fa-eye toggle-password" id="togglePassword"></i>
                    </div>
                </div>

                <!-- CAPTCHA Section -->
                <div class="captcha-section">
                    <div class="captcha-tabs">
                        <button type="button" class="captcha-tab active" data-captcha="text">Text CAPTCHA</button>
                        <button type="button" class="captcha-tab" data-captcha="image">Image CAPTCHA</button>
                    </div>
                    
                    <!-- Text CAPTCHA -->
                    <div class="captcha-content" id="loginTextCaptcha">
                        <div class="text-captcha-display" id="loginTextCaptchaDisplay"></div>
                        <div class="captcha-controls">
                            <button type="button" class="captcha-refresh" onclick="generateLoginTextCaptcha()">
                                <i class="fas fa-refresh"></i>
                            </button>
                        </div>
                        <div class="form-group">
                            <label for="loginTextCaptchaInput">Enter the text above</label>
                            <input type="text" id="loginTextCaptchaInput" placeholder="Enter CAPTCHA text" required>
                        </div>
                    </div>
                    
                    <!-- Image CAPTCHA -->
                    <div class="captcha-content" id="loginImageCaptcha" style="display: none;">
                        <div class="image-captcha-instruction">
                            <p>Select all images that contain: <span id="loginImageTargetText">cars</span></p>
                        </div>
                        <div class="image-captcha-grid" id="loginImageCaptchaGrid">
                            <!-- Images will be generated by JavaScript -->
                        </div>
                        <div class="captcha-controls">
                            <button type="button" class="captcha-refresh" onclick="generateLoginImageCaptcha()">
                                <i class="fas fa-refresh"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Google reCAPTCHA widget -->
                <div class="form-group" style="margin-top: 16px;">
                    <div class="g-recaptcha" data-sitekey="6Lfaw4MrAAAAAMpFV4PR-wGHZscV6xJ6ftktiqsi"></div>
                </div>

                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    Sign In
                </button>
            </form>

            <div class="divider">
                <span>Or try demo accounts</span>
            </div>

            <div class="demo-accounts">
                <button class="demo-btn admin-demo" data-role="admin">
                    <i class="fas fa-crown"></i>
                    <div>
                        <strong>Admin Demo (Amit Verma)</strong>
                        <small>amit.verma@company.com</small>
                    </div>
                </button>
                <button class="demo-btn manager-demo" data-role="manager">
                    <i class="fas fa-users-cog"></i>
                    <div>
                        <strong>Manager Demo (Rohit Singh)</strong>
                        <small>rohit.singh@company.com</small>
                    </div>
                </button>
                <button class="demo-btn employee-demo" data-role="employee">
                    <i class="fas fa-user"></i>
                    <div>
                        <strong>Employee Demo (Priya Sharma)</strong>
                        <small>priya.sharma@company.com</small>
                    </div>
                </button>
            </div>

            <div class="register-link">
                <p>Don't have an account? <a href="#" onclick="showRegisterPage()">Create Account</a></p>
            </div>

            <div class="login-footer">
                <!-- Removed SecureFlow RBAC copyright line -->
                <p>© 2025 AccessRakshak - Cybersecurity Project</p>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div class="dashboard-container" id="dashboardPage" style="display: none;">
        <!-- Navigation Bar -->
        <nav class="navbar">
            <div class="nav-brand">
                <i class="fas fa-shield-alt"></i>
                <span>AccessRakshak</span>
            </div>
            <div class="nav-links" id="navLinks">
                <!-- Dynamic navigation based on role -->
            </div>
            <div class="nav-user">
                <button class="dark-mode-toggle" id="dashboardDarkToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="userName">User Name</span>
                        <span class="user-role" id="userRole">Role</span>
                    </div>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="content-header">
                <h1 id="dashboardTitle">Dashboard</h1>
                <p id="dashboardSubtitle">Welcome to your personalized dashboard</p>
            </div>

            <!-- Dashboard Content (Dynamic based on role) -->
            <div class="dashboard-content" id="dashboardContent">
                <!-- Content will be populated by JavaScript -->
            </div>
        </main>
    </div>

    <!-- Access Denied Modal -->
    <div class="modal-overlay" id="accessDeniedModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Access Denied</h3>
            </div>
            <div class="modal-body">
                <p>You don't have permission to access this feature.</p>
                <p>Contact your administrator for assistance.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="closeAccessModal">OK</button>
            </div>
        </div>
    </div>

    <style>
    /* OTP Modal Overlay Styles */
    #otpModal.modal {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        width: 100vw; height: 100vh;
        background: rgba(0,0,0,0.35);
        z-index: 9999;
        display: none;
        align-items: center;
        justify-content: center;
        transition: background 0.2s;
    }
    #otpModal.modal[style*="display: flex"] {
        display: flex !important;
    }
    #otpModal .modal-content {
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.18);
        padding: 32px 24px 24px 24px;
        min-width: 320px;
        max-width: 350px;
        margin: 0 auto;
        position: relative;
        animation: otpModalIn 0.25s cubic-bezier(.4,1.4,.6,1) both;
    }
    @keyframes otpModalIn {
        0% { transform: translateY(40px) scale(0.98); opacity: 0; }
        100% { transform: none; opacity: 1; }
    }
    #otpModal .close {
        position: absolute;
        top: 12px;
        right: 18px;
        color: #888;
        font-size: 24px;
        cursor: pointer;
        z-index: 2;
    }
    #otpModal input#otpInput {
        border: 1px solid #d1d5db;
        border-radius: 5px;
        font-size: 18px;
        padding: 10px;
        margin-bottom: 12px;
        width: 100%;
        box-sizing: border-box;
        letter-spacing: 4px;
        text-align: center;
        outline: none;
        transition: border 0.2s;
    }
    #otpModal input#otpInput:focus {
        border-color: #4f8cff;
    }
    #otpModal #verifyOtpBtn {
        margin-top: 0;
        margin-bottom: 0;
    }
    #otpModal #otpDemoCode {
        margin-top: 10px;
        font-size: 13px;
        color: #888;
        text-align: center;
        user-select: all;
    }
    #otpModal #otpInfo {
        text-align: center;
        margin-bottom: 14px;
        color: #333;
    }
    
    /* CAPTCHA Styles */
    .captcha-section {
        margin: 20px 0;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 20px;
        background: #f9f9f9;
    }
    
    .captcha-tabs {
        display: flex;
        margin-bottom: 15px;
        border-bottom: 1px solid #e0e0e0;
    }
    
    .captcha-tab {
        background: none;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 14px;
        color: #666;
        border-bottom: 2px solid transparent;
        transition: all 0.3s ease;
    }
    
    .captcha-tab.active {
        color: #4f8cff;
        border-bottom-color: #4f8cff;
        font-weight: 600;
    }
    
    .captcha-tab:hover {
        color: #4f8cff;
    }
    
    .captcha-content {
        margin-top: 15px;
    }
    
    /* Text CAPTCHA Styles */
    .text-captcha-display {
        background: #fff;
        border: 2px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 15px;
        font-family: 'Courier New', monospace;
        font-size: 28px;
        font-weight: bold;
        letter-spacing: 8px;
        text-align: center;
        color: #333;
        position: relative;
        overflow: hidden;
        user-select: none;
        background-image: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 10px,
            rgba(0,0,0,0.1) 10px,
            rgba(0,0,0,0.1) 20px
        );
    }
    
    .text-captcha-display::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: repeating-linear-gradient(
            90deg,
            transparent,
            transparent 2px,
            rgba(255,0,0,0.1) 2px,
            rgba(255,0,0,0.1) 4px
        );
        pointer-events: none;
    }
    
    .captcha-controls {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 15px;
    }
    
    .captcha-refresh {
        background: #4f8cff;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.3s ease;
    }
    
    .captcha-refresh:hover {
        background: #3a7bd5;
    }
    
    /* Image CAPTCHA Styles */
    .image-captcha-instruction {
        margin-bottom: 15px;
        font-size: 16px;
        font-weight: 600;
        color: #333;
    }
    
    .image-captcha-instruction span {
        color: #4f8cff;
        font-weight: 700;
    }
    
    .image-captcha-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin-bottom: 15px;
    }
    
    .captcha-image {
        width: 100%;
        height: 100px;
        object-fit: cover;
        border: 3px solid #ddd;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        user-select: none;
    }
    
    .captcha-image:hover {
        border-color: #4f8cff;
        transform: scale(1.05);
    }
    
    .captcha-image.selected {
        border-color: #4f8cff;
        box-shadow: 0 0 10px rgba(79, 140, 255, 0.5);
    }
    
    .captcha-image.correct {
        border-color: #28a745;
        box-shadow: 0 0 10px rgba(40, 167, 69, 0.5);
    }
    
    .captcha-image.incorrect {
        border-color: #dc3545;
        box-shadow: 0 0 10px rgba(220, 53, 69, 0.5);
    }
    
    /* Dark Mode CAPTCHA Styles */
    .dark-mode .captcha-section {
        background: #2a2a2a;
        border-color: #444;
    }
    
    .dark-mode .captcha-tab {
        color: #ccc;
    }
    
    .dark-mode .captcha-tab.active {
        color: #4f8cff;
    }
    
    .dark-mode .text-captcha-display {
        background: #333;
        border-color: #555;
        color: #fff;
    }
    
    .dark-mode .image-captcha-instruction {
        color: #fff;
    }
    
    .dark-mode .captcha-image {
        border-color: #555;
    }
    
    /* Responsive CAPTCHA Styles */
    @media (max-width: 600px) {
        .captcha-tabs {
            flex-direction: column;
        }
        
        .captcha-tab {
            padding: 8px 15px;
            text-align: center;
        }
        
        .text-captcha-display {
            font-size: 24px;
            letter-spacing: 6px;
            padding: 15px;
        }
        
        .image-captcha-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .captcha-image {
            height: 80px;
        }
    }
    
    @media (max-width: 400px) {
        .text-captcha-display {
            font-size: 20px;
            letter-spacing: 4px;
        }
        
        .image-captcha-grid {
            grid-template-columns: 1fr;
        }
    }
    </style>
    <script src="script.js"></script>
    <script>
    // Password strength meter logic for registration page
    function updatePasswordStrengthMeter() {
        const password = document.getElementById('registerPassword')?.value || '';
        const strengthMeterFill = document.getElementById('strengthMeterFill');
        const strengthText = document.getElementById('strengthText');
        if (!strengthMeterFill || !strengthText) return;
        let score = 0;
        if (password.length >= 8) score++;
        if (/[A-Z]/.test(password)) score++;
        if (/[0-9]/.test(password)) score++;
        if (/[^A-Za-z0-9]/.test(password)) score++;
        const percent = (score / 4) * 100;
        strengthMeterFill.style.width = percent + '%';
        strengthMeterFill.style.transition = 'width 0.3s, background-color 0.3s';
        let text = 'Very Weak';
        let color = '#e74c3c';
        if (score === 1) { text = 'Weak'; color = '#e67e22'; }
        else if (score === 2) { text = 'Fair'; color = '#f1c40f'; }
        else if (score === 3) { text = 'Good'; color = '#2ecc71'; }
        else if (score === 4) { text = 'Strong'; color = '#27ae60'; }
        strengthText.textContent = `Password strength: ${text}`;
        strengthMeterFill.style.backgroundColor = color;
    }
    document.addEventListener('DOMContentLoaded', function() {
        var passwordInput = document.getElementById('registerPassword');
        if (passwordInput) {
            passwordInput.addEventListener('input', updatePasswordStrengthMeter);
        }
        
        // Initialize CAPTCHA system
        if (window.initializeCaptcha) {
            window.initializeCaptcha();
        }
    });
    </script>
</body>
</html>
